!function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(){}function r(e,t){for(var r in t)e[r]=t[r];return e}function n(e,t){for(var r in t)e[r]=1;return e}function a(e,t,r,n,a){e.__svelte_meta={loc:{file:t,line:r,column:n,char:a}}}function i(e){e()}function s(e,t){e.appendChild(t)}function o(e,t,r){e.insertBefore(t,r)}function c(e){e.parentNode.removeChild(e)}function l(e,t){for(var r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function h(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function d(e,t,r){e.addEventListener(t,r,!1)}function f(e,t,r){e.removeEventListener(t,r,!1)}function p(e,t){e.data=""+t}function v(e,t){for(var r=0;r<e.options.length;r+=1){var n=e.options[r];if(n.__value===t)return void(n.selected=!0)}}function m(){return Object.create(null)}function g(t,r){return t!=t?r==r:t!==r||t&&"object"===(void 0===t?"undefined":e(t))||"function"==typeof t}function w(e,t){return e!=e?t==t:e!==t}function _(e,t){var r=e in this._handlers&&this._handlers[e].slice();if(r)for(var n=0;n<r.length;n+=1){var a=r[n];if(!a.__calling)try{a.__calling=!0,a.call(this,t)}finally{a.__calling=!1}}}function y(e){e._lock=!0,C(e._beforecreate),C(e._oncreate),C(e._aftercreate),e._lock=!1}function x(){return this._state}function N(e,t){e._handlers=m(),e._slots=m(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function b(e,t){var r=this._handlers[e]||(this._handlers[e]=[]);return r.push(t),{cancel:function(){var e=r.indexOf(t);~e&&r.splice(e,1)}}}function C(e){for(;e&&e.length;)e.shift()()}function E(){this.store._remove(this)}var k={destroy:function(e){(function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}}).call(this,e),this.destroy=function(){console.warn("Component was already destroyed")}},get:x,fire:_,on:b,set:function(t){if("object"!==(void 0===t?"undefined":e(t)))throw new Error(this._debugName+".set was called without an object of data key-values to update.");this._checkReadOnly(t),function(e){this._set(r({},e)),this.root._lock||y(this.root)}.call(this,t)},_recompute:t,_set:function(e){var t=this._state,n={},a=!1;for(var i in e=r(this._staged,e),this._staged={},e)this._differs(e[i],t[i])&&(n[i]=a=!0);a&&(this._state=r(r({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))},_stage:function(e){r(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:g},P=window.nsGmx.Translations,S=P.getText.bind(P);P.addText("rus",{directions:{north:"С",northEast:"СВ",east:"В",southEast:"ЮВ",south:"Ю",southWest:"ЮЗ",west:"З",northWest:"СВ"}}),P.addText("eng",{directions:{north:"N",northEast:"NE",east:"E",southEast:"SE",south:"S",southWest:"SW",west:"W",northWest:"NW"}});var F=function(e){var t=e.mode,r=e.param,n=e.lat,a=e.lng,i=e.hours;return new Promise(function(e,s){var o=new Headers;o.append("center","["+a+","+n+"]");var c=new Request("http://95.163.250.203:9898/maritime/v2.0/rest/"+t+"/"+r+"/0.5/"+i,{method:"GET",headers:o,mode:"cors",cache:"default"});fetch(c).then(function(e){return e.json()}).then(function(t){var n=t.features;500===t.code?s(t):e({param:r,features:n})}).catch(function(e){s(e)})})},j=function(e){return e&&(e+-273.15).toFixed()||""},M=function(e){return e&&e.toFixed()||""},$=function(e){return e?S(0<=e&&e<=22.5?"directions.north":22.5<e&&e<=67.5?"directions.northEast":67.5<e&&e<=112.5?"directions.east":112.5<e&&e<=157.5?"directions.southEast":157.5<e&&e<=202.5?"directions.south":202.5<e&&e<=247.5?"directions.southWest":247.5<e&&e<=292.5?"directions.west":292.5<e&&e<=337.5?"directions.northWest":"directions.north"):""},G=function(e){if(e){var t=e.lat,r=e.lng;return function(e){return e?0<=e&&e<=90?e.toFixed(2)+"°N":-90<=e&&e<0?Math.abs(e).toFixed(2)+"°S":"":""}(t)+" "+function(e){var t=function(e){return 0<=e&&e<=180?e.toFixed(2)+"°E":-180<e&&e<0?Math.abs(e).toFixed(2)+"°W":void 0};if(e){if(-180<e&&e<=180)return t(e);if(e>180){for(var r=e;r>180;)r-=360;return t(r)}if(e<=-180){for(var n=e;n<=-180;)n+=360;return t(n)}return""}return""}(r)}return""},W=function(e){return e&&(e/(101325/760)).toFixed()||""},O=72,T=4,R=function(){for(var e=[],t=0,r=0;r<8;++r)e.push(t),t+=3;return e}(),D=function(){for(var e=[],t=0;t<=O;t+=3)e.push(t);return e}(),I=["gfs"],A=["tmp","wind","precip","rh","pressure","dewpoint","cloud"],V=function(){for(var e=[],t=8*T,r=0;r<t;++r)e.push(null);return e}(),H=function(e,t){var r=(new Date).getHours();return function(e){var t=new Date;return e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}(e)&&t&&t<=r&&r<t+3},q=function(e,t,r,n){return new Promise(function(a,i){F({mode:e,param:"temperature",lat:t,lng:r,hours:0}).then(function(e){var t,r=(t=e.features,Array.isArray(t)?t:Array.from(t)),i=r[0];r.slice(1);if(i){var s=i.properties.ts,o=function(e){for(var t=0;t<D.length;++t){var r=D[t];if(r<=e&&e<r+3)return t}return-1}((n.getTime()-1e3*s)/36e5);a(o)}else a(0)}).catch(function(e){i(e)})})},Y=window.nsGmx.Translations;Y.addText("rus",{forecast:"Прогноз",units:{hours:"Часы",d:"°C",mm:"мм",ms:"м/с",mmhg:"мм рт. ст."}}),Y.addText("eng",{forecast:"Forecast",units:{hours:"Hours",d:"°C",mm:"mm",ms:"m/s",mmhg:"mmHg"}});var U=function(e){return e<10?"0"+e:e},z=function(e){return e.getFullYear()+"-"+U(e.getMonth()+1)+"-"+U(e.getDate())},B=function(e){var t=function(e){return e.reduce(function(e,t){var r=t.properties.ts,n=new Date(1e3*r),a=z(n),i=n.getHours();return e[a]=e[a]||{},e[a][i]=t,e},{})}(e);return Object.keys(t).sort().reduce(function(e,r,n){return Object.keys(t[r]).reduce(function(e,a){for(var i=0;i<8;++i){var s=parseInt(a,10);if(R[i]===s){e[8*n+i]=t[r][a];break}if(R[i]>s){e[8*n+i-1]=t[r][a];break}}return e},e)},V.slice())},J=function(e,t){for(var r=0;r<e.length;++r){var n=e[r],a=n.param,i=n.features;if(a===t)return B(i)}return[]},K=function(e,t,r){return e===8*t+r},Q=function(e){var t=e.active,r=e.tmp,n=e.ws,a=e.wd,i=e.apcp,s=e.prmsl,o=e.rh,c=e.hourIndex;switch(A[t]){case"tmp":return"<div><span>"+j(r[c])+"</span><span>"+S("units.d")+"</span></div>";case"wind":return"<div><span>"+M(n[c])+"</span><span>"+S("units.ms")+"</span><span>"+$(a[c])+"</span></div>";case"precip":return"<div><span>"+M(i[c])+"</span><span>"+S("units.mm")+"</span></div>";case"rh":return"<div><span>"+M(o[c])+"</span><span>%</span></div>";case"pressure":return"<div><span>"+W(s[c])+"</span><span>"+S("units.mmhg")+"</span></div>"}return""},X=function(e,t){for(var r=0,n=0;r<e.length;++r)for(var a=e[r],i=0;i<t.length;++i,++n){var s=t[i];if(H(a,s))return n}return-1};var Z={show:function(){this.refs.container.style.display="flex"},hide:function(){this.refs.container.style.display="none"},selectHour:function(e,t,r,n){var a=this,i=this.store.get().mode,s=this.get().latLng,o=s.lat,c=s.lng,l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),t);this.set({hourIndex:8*r+n}),q(i,o,c,l).then(function(e){a.store.set({moment:e})}).catch(function(e){console.log(e)})}};function ee(){this.refs.container.removeEventListener("click"),this.refs.container.removeEventListener("mousewheel"),this.refs.container.removeEventListener("mousemove")}var te="src\\Forecast.html";function re(e,t){var r,n,i,l=t.d&&t.d.toLocaleDateString()||"";return{c:function(){r=h("td"),n=u(l),r.colSpan=i=t.hours.length,r.className="weather-view-day weather-view-margin-cell svelte-rrgh5i",a(r,te,55,20,2262)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.days&&l!==(l=t.d&&t.d.toLocaleDateString()||"")&&p(n,l),e.hours&&i!==(i=t.hours.length)&&(r.colSpan=i)},d:function(e){e&&c(r)}}}function ne(e,t){for(var r,n=t.hours,a=[],i=0;i<n.length;i+=1)a[i]=ae(e,pe(t,n,i));return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();r=document.createComment("")},m:function(e,t){for(var n=0;n<a.length;n+=1)a[n].m(e,t);o(e,r,t)},p:function(t,i){if(t.hours||t.days||t.hourIndex){n=i.hours;for(var s=0;s<n.length;s+=1){var o=pe(i,n,s);a[s]?a[s].p(t,o):(a[s]=ae(e,o),a[s].c(),a[s].m(r.parentNode,r))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}},d:function(e){l(a,e),e&&c(r)}}}function ae(e,t){var r,n,i,l=t.h;return{c:function(){r=h("td"),n=u(l),r._svelte={component:e,ctx:t},d(r,"click",ve),r.className=i="weather-view-hour "+(t.j%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+(H(t.d,t.h)?" weather-view-now":K(t.hourIndex,t.i,t.j)?" weather-view-selected-hour":"")+" svelte-rrgh5i",a(r,te,63,24,2614)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.hours&&l!==(l=t.h)&&p(n,l),r._svelte.ctx=t,(e.hours||e.days||e.hourIndex)&&i!==(i="weather-view-hour "+(t.j%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+(H(t.d,t.h)?" weather-view-now":K(t.hourIndex,t.i,t.j)?" weather-view-selected-hour":"")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r),f(r,"click",ve)}}}function ie(e,t){var r,n,i,l=j(t.t);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,69,20,3063)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.tmp&&l!==(l=j(t.t))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function se(e,t){var r,n,i,l=M(t.s);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,74,20,3329)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.ws&&l!==(l=M(t.s))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function oe(e,t){var r,n,i,l=$(t.d);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,79,20,3594)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.wd&&l!==(l=$(t.d))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function ce(e,t){var r,n,i,l=M(t.g);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,84,20,3846)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.gust&&l!==(l=M(t.g))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function le(e,t){var r,n,i,l=M(t.a);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,88,20,4084)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.apcp&&l!==(l=M(t.a))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function he(e,t){var r,n,i,l=M(t.h);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,93,20,4338)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.rh&&l!==(l=M(t.h))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function ue(e,t){var r,n,i,l=W(t.p);return{c:function(){r=h("td"),n=u(l),r.className=i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i",a(r,te,98,20,4595)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.prmsl&&l!==(l=W(t.p))&&p(n,l),e.hours&&i!==(i=(t.i%t.hours.length==0?"weather-view-margin-cell":"weather-view-cell")+" svelte-rrgh5i")&&(r.className=i)},d:function(e){e&&c(r)}}}function de(e,t,r){var n=Object.create(e);return n.d=t[r],n.each_value=t,n.d_index=r,n}function fe(e,t,r){var n=Object.create(e);return n.d=t[r],n.each_value_1=t,n.i=r,n}function pe(e,t,r){var n=Object.create(e);return n.h=t[r],n.each_value_2=t,n.j=r,n}function ve(e){var t=this._svelte,r=t.component,n=t.ctx;r.selectHour(n.d,n.h,n.i,n.j)}function me(e,t,r){var n=Object.create(e);return n.t=t[r],n.each_value_3=t,n.i=r,n}function ge(e,t,r){var n=Object.create(e);return n.s=t[r],n.each_value_4=t,n.i=r,n}function we(e,t,r){var n=Object.create(e);return n.d=t[r],n.each_value_5=t,n.i=r,n}function _e(e,t,r){var n=Object.create(e);return n.g=t[r],n.each_value_6=t,n.i=r,n}function ye(e,t,r){var n=Object.create(e);return n.a=t[r],n.each_value_7=t,n.i=r,n}function xe(e,t,r){var n=Object.create(e);return n.h=t[r],n.each_value_8=t,n.i=r,n}function Ne(e,t,r){var n=Object.create(e);return n.p=t[r],n.each_value_9=t,n.i=r,n}function be(e){var t=this;if(this._debugName="<Forecast>",!e||!e.target&&!e.root)throw new Error("'target' is a required option");if(N(this,e),this.refs={},this._state=r({result:[],hours:R,latLng:{lat:null,lng:null},hourIndex:-1},e.data),this._recompute({result:1,wind:1,times:1},this._state),"result"in this._state||console.warn("<Forecast> was created without expected data property 'result'"),"latLng"in this._state||console.warn("<Forecast> was created without expected data property 'latLng'"),"hours"in this._state||console.warn("<Forecast> was created without expected data property 'hours'"),"hourIndex"in this._state||console.warn("<Forecast> was created without expected data property 'hourIndex'"),this._intro=!!e.intro,this._handlers.destroy=[ee],this._fragment=function(e,t){var r,n,v,m,g,w,_,y,x,N,b,C,E,L,k,P,F,j,M,$,W,O,T,R,D,I,A,V,H,q,Y,U,z,B,J,K,Q,X,Z,ee,ae,pe,ve,be,Ce,Ee,Le,ke,Pe,Se,Fe,je,Me,$e,Ge,We,Oe,Te,Re,De,Ie,Ae,Ve,He,qe,Ye,Ue,ze,Be,Je,Ke,Qe,Xe,Ze,et,tt,rt,nt,at,it,st,ot,ct,lt,ht,ut,dt,ft,pt,vt,mt,gt,wt,_t,yt,xt,Nt,bt,Ct,Et,Lt,kt,Pt=G(t.latLng),St=S("units.hours"),Ft=S("tmp"),jt=S("units.d"),Mt=S("wind"),$t=S("units.ms"),Gt=S("direction"),Wt=S("gust"),Ot=S("units.ms"),Tt=S("precip"),Rt=S("units.mm"),Dt=S("rh"),It=S("pressure"),At=S("units.mmhg");function Vt(t){e.hide()}for(var Ht=t.days,qt=[],Yt=0;Yt<Ht.length;Yt+=1)qt[Yt]=re(0,de(t,Ht,Yt));var Ut=t.days,zt=[];for(Yt=0;Yt<Ut.length;Yt+=1)zt[Yt]=ne(e,fe(t,Ut,Yt));var Bt=t.tmp,Jt=[];for(Yt=0;Yt<Bt.length;Yt+=1)Jt[Yt]=ie(0,me(t,Bt,Yt));var Kt=t.ws,Qt=[];for(Yt=0;Yt<Kt.length;Yt+=1)Qt[Yt]=se(0,ge(t,Kt,Yt));var Xt=t.wd,Zt=[];for(Yt=0;Yt<Xt.length;Yt+=1)Zt[Yt]=oe(0,we(t,Xt,Yt));var er=t.gust,tr=[];for(Yt=0;Yt<er.length;Yt+=1)tr[Yt]=ce(0,_e(t,er,Yt));var rr=t.apcp,nr=[];for(Yt=0;Yt<rr.length;Yt+=1)nr[Yt]=le(0,ye(t,rr,Yt));var ar=t.rh,ir=[];for(Yt=0;Yt<ar.length;Yt+=1)ir[Yt]=he(0,xe(t,ar,Yt));var sr=t.prmsl,or=[];for(Yt=0;Yt<sr.length;Yt+=1)or[Yt]=ue(0,Ne(t,sr,Yt));return{c:function(){r=h("div"),n=h("div"),v=h("table"),m=h("tr"),g=h("td"),w=h("i"),_=u("\r\n                "),y=h("td"),x=h("span"),N=u(Pt),b=h("i"),C=u("\r\n            "),E=h("tr"),L=h("td"),k=u("\r\n                "),P=h("td"),F=u(St),j=u("\r\n                "),M=h("td"),$=u("\r\n            "),W=h("tr"),O=h("td"),T=u("\r\n                "),R=h("td"),D=u(Ft),I=u("\r\n                "),A=h("td"),V=u(jt),H=u("\r\n            "),q=h("tr"),Y=h("td"),U=u("\r\n                "),z=h("td"),B=u(Mt),J=u("\r\n                "),K=h("td"),Q=u($t),X=u("\r\n            "),Z=h("tr"),ee=h("td"),ae=u("\r\n                "),pe=h("td"),ve=u(Gt),be=u("\r\n                "),Ce=h("td"),Ee=u("\r\n            "),Le=h("tr"),ke=h("td"),Pe=u("\r\n                "),Se=h("td"),Fe=u(Wt),je=u("\r\n                "),Me=h("td"),$e=u(Ot),Ge=u("\r\n            "),We=h("tr"),Oe=h("td"),Te=u("\r\n                "),Re=h("td"),De=u(Tt),Ie=u("\r\n                "),Ae=h("td"),Ve=u(Rt),He=u("\r\n            "),qe=h("tr"),Ye=h("td"),Ue=u("\r\n                "),ze=h("td"),Be=u(Dt),Je=u("\r\n                "),Ke=h("td"),Qe=u("%"),Xe=u("\r\n            "),Ze=h("tr"),et=h("td"),tt=u("\r\n                "),rt=h("td"),nt=u(It),at=u("\r\n                "),it=h("td"),st=u(At),ot=u("\r\n    "),ct=h("div"),lt=h("table"),ht=h("tr");for(var e=0;e<qt.length;e+=1)qt[e].c();for(ut=u("\r\n            "),dt=h("tr"),e=0;e<zt.length;e+=1)zt[e].c();for(ft=u("\r\n            "),pt=h("tr"),e=0;e<Jt.length;e+=1)Jt[e].c();for(vt=u("\r\n            "),mt=h("tr"),e=0;e<Qt.length;e+=1)Qt[e].c();for(gt=u("\r\n            "),wt=h("tr"),e=0;e<Zt.length;e+=1)Zt[e].c();for(_t=u("\r\n            "),yt=h("tr"),e=0;e<tr.length;e+=1)tr[e].c();for(xt=u("                 \r\n            "),Nt=h("tr"),e=0;e<nr.length;e+=1)nr[e].c();for(bt=u("\r\n            "),Ct=h("tr"),e=0;e<ir.length;e+=1)ir[e].c();for(Et=u("\r\n            "),Lt=h("tr"),e=0;e<or.length;e+=1)or[e].c();w.className="svelte-rrgh5i",a(w,te,5,20,213),d(g,"click",Vt),g.className="weather-view-close svelte-rrgh5i",a(g,te,4,16,142),a(x,te,7,66,311),b.className="svelte-rrgh5i",a(b,te,7,101,346),y.className="weather-view-current-spot svelte-rrgh5i",y.colSpan="2",a(y,te,7,16,261),a(m,te,3,12,120),L.className="svelte-rrgh5i",a(L,te,10,16,429),P.className="weather-view-param svelte-rrgh5i",a(P,te,11,16,456),M.className="weather-view-param-unit svelte-rrgh5i",a(M,te,12,16,536),a(E,te,9,12,407),O.className="svelte-rrgh5i",a(O,te,15,16,632),R.className="weather-view-param svelte-rrgh5i",a(R,te,16,16,659),A.className="weather-view-param-unit svelte-rrgh5i",a(A,te,17,16,731),a(W,te,14,12,610),Y.className="svelte-rrgh5i",a(Y,te,20,16,849),z.className="weather-view-param svelte-rrgh5i",a(z,te,21,16,876),K.className="weather-view-param-unit svelte-rrgh5i",a(K,te,22,16,949),a(q,te,19,12,827),ee.className="svelte-rrgh5i",a(ee,te,25,16,1068),pe.className="weather-view-param svelte-rrgh5i",a(pe,te,26,16,1095),Ce.className="weather-view-param-unit svelte-rrgh5i",a(Ce,te,27,16,1173),a(Z,te,24,12,1046),ke.className="svelte-rrgh5i",a(ke,te,30,16,1269),Se.className="weather-view-param svelte-rrgh5i",a(Se,te,31,16,1296),Me.className="weather-view-param-unit svelte-rrgh5i",a(Me,te,32,16,1369),a(Le,te,29,12,1247),Oe.className="svelte-rrgh5i",a(Oe,te,35,16,1488),Re.className="weather-view-param svelte-rrgh5i",a(Re,te,36,16,1515),Ae.className="weather-view-param-unit svelte-rrgh5i",a(Ae,te,37,16,1590),a(We,te,34,12,1466),Ye.className="svelte-rrgh5i",a(Ye,te,40,16,1709),ze.className="weather-view-param svelte-rrgh5i",a(ze,te,41,16,1736),Ke.className="weather-view-param-unit svelte-rrgh5i",a(Ke,te,42,16,1807),a(qe,te,39,12,1687),et.className="svelte-rrgh5i",a(et,te,45,16,1904),rt.className="weather-view-param svelte-rrgh5i",a(rt,te,46,16,1931),it.className="weather-view-param-unit svelte-rrgh5i",a(it,te,47,16,2008),a(Ze,te,44,12,1882),a(v,te,2,8,99),n.className="weather-view-params svelte-rrgh5i",a(n,te,1,4,56),ht.className="svelte-rrgh5i",a(ht,te,53,12,2193),dt.className="svelte-rrgh5i",a(dt,te,60,12,2503),pt.className="svelte-rrgh5i",a(pt,te,67,12,2992),mt.className="svelte-rrgh5i",a(mt,te,72,12,3259),wt.className="svelte-rrgh5i",a(wt,te,77,12,3524),yt.className="svelte-rrgh5i",a(yt,te,82,12,3774),Nt.className="svelte-rrgh5i",a(Nt,te,86,12,4012),Ct.className="svelte-rrgh5i",a(Ct,te,91,12,4268),Lt.className="svelte-rrgh5i",a(Lt,te,96,12,4522),a(lt,te,52,8,2172),ct.className="weather-view-values svelte-rrgh5i",a(ct,te,51,4,2129),r.className="weather-view-container",a(r,te,0,0,0)},m:function(t,a){o(t,r,a),s(r,n),s(n,v),s(v,m),s(m,g),s(g,w),s(m,_),s(m,y),s(y,x),s(x,N),s(y,b),s(v,C),s(v,E),s(E,L),s(E,k),s(E,P),s(P,F),s(E,j),s(E,M),s(v,$),s(v,W),s(W,O),s(W,T),s(W,R),s(R,D),s(W,I),s(W,A),s(A,V),s(v,H),s(v,q),s(q,Y),s(q,U),s(q,z),s(z,B),s(q,J),s(q,K),s(K,Q),s(v,X),s(v,Z),s(Z,ee),s(Z,ae),s(Z,pe),s(pe,ve),s(Z,be),s(Z,Ce),s(v,Ee),s(v,Le),s(Le,ke),s(Le,Pe),s(Le,Se),s(Se,Fe),s(Le,je),s(Le,Me),s(Me,$e),s(v,Ge),s(v,We),s(We,Oe),s(We,Te),s(We,Re),s(Re,De),s(We,Ie),s(We,Ae),s(Ae,Ve),s(v,He),s(v,qe),s(qe,Ye),s(qe,Ue),s(qe,ze),s(ze,Be),s(qe,Je),s(qe,Ke),s(Ke,Qe),s(v,Xe),s(v,Ze),s(Ze,et),s(Ze,tt),s(Ze,rt),s(rt,nt),s(Ze,at),s(Ze,it),s(it,st),s(r,ot),s(r,ct),s(ct,lt),s(lt,ht);for(var i=0;i<qt.length;i+=1)qt[i].m(ht,null);for(s(lt,ut),s(lt,dt),i=0;i<zt.length;i+=1)zt[i].m(dt,null);for(s(lt,ft),s(lt,pt),i=0;i<Jt.length;i+=1)Jt[i].m(pt,null);for(s(lt,vt),s(lt,mt),i=0;i<Qt.length;i+=1)Qt[i].m(mt,null);for(s(lt,gt),s(lt,wt),i=0;i<Zt.length;i+=1)Zt[i].m(wt,null);for(s(lt,_t),s(lt,yt),i=0;i<tr.length;i+=1)tr[i].m(yt,null);for(s(yt,xt),s(lt,Nt),i=0;i<nr.length;i+=1)nr[i].m(Nt,null);for(s(lt,bt),s(lt,Ct),i=0;i<ir.length;i+=1)ir[i].m(Ct,null);for(s(lt,Et),s(lt,Lt),i=0;i<or.length;i+=1)or[i].m(Lt,null);e.refs.container=r,kt=!0},p:function(t,r){if(t.latLng&&Pt!==(Pt=G(r.latLng))&&p(N,Pt),t.hours||t.days){Ht=r.days;for(var n=0;n<Ht.length;n+=1){var a=de(r,Ht,n);qt[n]?qt[n].p(t,a):(qt[n]=re(0,a),qt[n].c(),qt[n].m(ht,null))}for(;n<qt.length;n+=1)qt[n].d(1);qt.length=Ht.length}if(t.hours||t.days||t.hourIndex){for(Ut=r.days,n=0;n<Ut.length;n+=1){var i=fe(r,Ut,n);zt[n]?zt[n].p(t,i):(zt[n]=ne(e,i),zt[n].c(),zt[n].m(dt,null))}for(;n<zt.length;n+=1)zt[n].d(1);zt.length=Ut.length}if(t.hours||t.tmp){for(Bt=r.tmp,n=0;n<Bt.length;n+=1){var s=me(r,Bt,n);Jt[n]?Jt[n].p(t,s):(Jt[n]=ie(0,s),Jt[n].c(),Jt[n].m(pt,null))}for(;n<Jt.length;n+=1)Jt[n].d(1);Jt.length=Bt.length}if(t.hours||t.ws){for(Kt=r.ws,n=0;n<Kt.length;n+=1){var o=ge(r,Kt,n);Qt[n]?Qt[n].p(t,o):(Qt[n]=se(0,o),Qt[n].c(),Qt[n].m(mt,null))}for(;n<Qt.length;n+=1)Qt[n].d(1);Qt.length=Kt.length}if(t.hours||t.wd){for(Xt=r.wd,n=0;n<Xt.length;n+=1){var c=we(r,Xt,n);Zt[n]?Zt[n].p(t,c):(Zt[n]=oe(0,c),Zt[n].c(),Zt[n].m(wt,null))}for(;n<Zt.length;n+=1)Zt[n].d(1);Zt.length=Xt.length}if(t.hours||t.gust){for(er=r.gust,n=0;n<er.length;n+=1){var l=_e(r,er,n);tr[n]?tr[n].p(t,l):(tr[n]=ce(0,l),tr[n].c(),tr[n].m(yt,xt))}for(;n<tr.length;n+=1)tr[n].d(1);tr.length=er.length}if(t.hours||t.apcp){for(rr=r.apcp,n=0;n<rr.length;n+=1){var h=ye(r,rr,n);nr[n]?nr[n].p(t,h):(nr[n]=le(0,h),nr[n].c(),nr[n].m(Nt,null))}for(;n<nr.length;n+=1)nr[n].d(1);nr.length=rr.length}if(t.hours||t.rh){for(ar=r.rh,n=0;n<ar.length;n+=1){var u=xe(r,ar,n);ir[n]?ir[n].p(t,u):(ir[n]=he(0,u),ir[n].c(),ir[n].m(Ct,null))}for(;n<ir.length;n+=1)ir[n].d(1);ir.length=ar.length}if(t.hours||t.prmsl){for(sr=r.prmsl,n=0;n<sr.length;n+=1){var d=Ne(r,sr,n);or[n]?or[n].p(t,d):(or[n]=ue(0,d),or[n].c(),or[n].m(Lt,null))}for(;n<or.length;n+=1)or[n].d(1);or.length=sr.length}},i:function(e,t){kt||this.m(e,t)},o:i,d:function(t){t&&c(r),f(g,"click",Vt),l(qt,t),l(zt,t),l(Jt,t),l(Qt,t),l(Zt,t),l(tr,t),l(nr,t),l(ir,t),l(or,t),e.refs.container===r&&(e.refs.container=null)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var e=this,t=function(e){return e.stopPropagation()};this.refs.container.addEventListener("click",t),this.refs.container.addEventListener("mousewheel",t),this.refs.container.addEventListener("mousemove",t);var r=this.store.on("state",function(t){t.changed.mode&&(e.hide(),e._marker&&nsGmx.leafletMap.removeControl(e._marker))});this.on("destroy",r.cancel);var n=L.control.gmxIcon({id:"tl-cloud-cover",togglable:!0,title:S("forecast")}).on("statechange",function(t){t.target.options.isActive?(nsGmx.leafletMap.getContainer().style.cursor="crosshair",nsGmx.leafletMap.on("click",a)):(nsGmx.leafletMap.off("click",a),nsGmx.leafletMap.getContainer().style.cursor="",e._marker&&nsGmx.leafletMap.removeControl(e._marker))}),a=function(t){var r=t.latlng,n=r.lat,a=r.lng,i=e.store.get(),s=i.mode,o=(i.moment,i.active);if(s&&n&&a){e._marker&&nsGmx.leafletMap.removeControl(e._marker);var c=L.divIcon({className:"weather-view-marker"});e._marker=L.marker({lat:n,lng:a},{icon:c}),nsGmx.leafletMap.addControl(e._marker),nsGmx.widgets.notifications.startAction("WeatherView");var l=["temperature","wind","precipitation","pressure","humidity"].map(function(e){return F({mode:s,param:e,lat:n,lng:a,hours:O})});Promise.all(l).then(function(t){if(nsGmx.widgets.notifications.stopAction("WeatherView","success"),window.iconSidebarWidget.open("weather-pane"),e.set({result:t,latLng:{lat:n,lng:a}}),0<=o&&o<A.length){var r=e.get(),i=r.tmp,s=r.ws,c=r.wd,l=r.apcp,h=r.prmsl,u=r.rh,d=r.hourIndex,f=r.days,p=r.hours,v=d<0?X(f,p):d;e._marker.bindPopup(Q({active:o,tmp:i,ws:s,wd:c,apcp:l,prmsl:h,rh:u,hourIndex:v}),{className:"weather-view-popup"}).openPopup()}e.show()}).catch(function(t){e._marker&&nsGmx.leafletMap.removeControl(e._marker),console.log(t),e.set({result:[]}),nsGmx.widgets.notifications.stopAction("WeatherView","fail")})}};nsGmx.leafletMap.addControl(n)}).call(t),t.fire("update",{changed:n({},t._state),current:t._state})}),e.target){if(e.hydrate)throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");this._fragment.c(),this._mount(e.target,e.anchor),y(this)}this._intro=!0}r(be.prototype,k),r(be.prototype,Z),be.prototype._checkReadOnly=function(e){if("tmp"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'tmp'");if("wind"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'wind'");if("ws"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'ws'");if("wd"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'wd'");if("gust"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'gust'");if("apcp"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'apcp'");if("prmsl"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'prmsl'");if("rh"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'rh'");if("times"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'times'");if("days"in e&&!this._updatingReadonlyProperty)throw new Error("<Forecast>: Cannot set read-only property 'days'")},be.prototype._recompute=function(e,t){var r;e.result&&(this._differs(t.tmp,t.tmp=(r=t.result,J(r,"temperature").map(function(e){return e&&e.properties.tmp||null})))&&(e.tmp=!0),this._differs(t.wind,t.wind=function(e){var t=e.result;return J(t,"wind").reduce(function(e,t){if(t){var r=t.properties,n=r.wind,a=r.wd,i=r.gust;e.wind=e.wind.concat(n),e.wd=e.wd.concat(a),e.gust=e.gust.concat(i)}else e.wind=e.wind.concat(null),e.wd=e.wd.concat(null),e.gust=e.gust.concat(null);return e},{wind:[],wd:[],gust:[]})}(t))&&(e.wind=!0)),e.wind&&(this._differs(t.ws,t.ws=t.wind.wind)&&(e.ws=!0),this._differs(t.wd,t.wd=t.wind.wd)&&(e.wd=!0),this._differs(t.gust,t.gust=t.wind.gust)&&(e.gust=!0)),e.result&&(this._differs(t.apcp,t.apcp=function(e){var t=e.result;return J(t,"precipitation").map(function(e){return e&&e.properties.precip||null})}(t))&&(e.apcp=!0),this._differs(t.prmsl,t.prmsl=function(e){var t=e.result;return J(t,"pressure").map(function(e){return e&&e.properties.pressure||null})}(t))&&(e.prmsl=!0),this._differs(t.rh,t.rh=function(e){var t=e.result;return J(t,"humidity").map(function(e){return e&&e.properties.rh||null})}(t))&&(e.rh=!0),this._differs(t.times,t.times=t.result.reduce(function(e,t){return t.features.reduce(function(e,t){var r=t.properties.ts;return e.concat(r)},e)},[]).sort())&&(e.times=!0)),e.times&&this._differs(t.days,t.days=function(e){var t=e.times;if(t.length>0){var r=t.reduce(function(e,t){var r=new Date(1e3*t),n=z(r);return e[n]=new Date(n),e},{});return Object.keys(r).map(function(e){return r[e]})}return new Array(T)}(t))&&(e.days=!0)};var Ce=L.Control.extend({includes:L.Evented?L.Evented.prototype:L.Mixin.Events,initialize:function(e){L.setOptions(this,e)},onAdd:function(e){return this._container=L.DomUtil.create("div","weather-view"),this._container.addEventListener("mousewheel",function(e){return e.stopPropagation()}),this._widget=new be({target:this._container,store:this.options.store}),this._widget.hide(),this._container}}),Ee=window.nsGmx.Translations;Ee.addText("rus",{mode:"Выбор модели",now:"Сейчас"}),Ee.addText("eng",{mode:"Select model",now:"Now"});var Le="http://95.163.250.203:9898/maritime/v2.0/ogc/wms",ke="image/png",Pe=function(e){return function(e,t,r,n){for(var a=function(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charAt(r));return t}(t),i=0;a.length<r;++i)"left"===e?a.splice(0,0,n):a.push(n);return a.join("")}("left",e,3,"0")};function Se(){}var Fe="src\\LayerSwitch.html";function je(e,t){var r,n,i,l=t.x.toUpperCase();return{c:function(){r=h("option"),n=u(l),r.__value=i=t.x,r.value=r.__value,r.className="svelte-1932cnh",a(r,Fe,5,16,196)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.modes&&l!==(l=t.x.toUpperCase())&&p(n,l),e.modes&&i!==(i=t.x)&&(r.__value=i),r.value=r.__value},d:function(e){e&&c(r)}}}function Me(e,t){var r,n,i,l,v,m,g,w,_,y,x=S(t.x);return{c:function(){r=h("li"),n=h("i"),l=u("\r\n                "),v=h("i"),g=u("\r\n                "),w=h("label"),_=u(x),n.className=i="layer-bullet"+(t.i===t.$active?" layer-bullet-active":" layer-bullet-inactive")+" svelte-1932cnh",a(n,Fe,12,16,397),v.className=m="layer-icon "+(t.i===t.$active?"weather-view-"+t.x+"-active":"weather-view-"+t.x+"-inactive")+" svelte-1932cnh",a(v,Fe,13,16,512),w.className=y="layer-title"+(t.i===t.$active?" layer-title-active":"")+" svelte-1932cnh",a(w,Fe,14,16,632),r._svelte={component:e,ctx:t},d(r,"click",Oe),r.className="svelte-1932cnh",a(r,Fe,11,12,354)},m:function(e,t){o(e,r,t),s(r,n),s(r,l),s(r,v),s(r,g),s(r,w),s(w,_)},p:function(e,t){e.$active&&i!==(i="layer-bullet"+(t.i===t.$active?" layer-bullet-active":" layer-bullet-inactive")+" svelte-1932cnh")&&(n.className=i),(e.$active||e.layers)&&m!==(m="layer-icon "+(t.i===t.$active?"weather-view-"+t.x+"-active":"weather-view-"+t.x+"-inactive")+" svelte-1932cnh")&&(v.className=m),e.layers&&x!==(x=S(t.x))&&p(_,x),e.$active&&y!==(y="layer-title"+(t.i===t.$active?" layer-title-active":"")+" svelte-1932cnh")&&(w.className=y),r._svelte.ctx=t},d:function(e){e&&c(r),f(r,"click",Oe)}}}function $e(e,t){var r,n;return{c:function(){r=h("div"),(n=h("i")).className=t.legend+" svelte-1932cnh",a(n,Fe,20,8,834),r.className="legend svelte-1932cnh",a(r,Fe,19,4,804)},m:function(e,t){o(e,r,t),s(r,n)},p:function(e,t){e.legend&&(n.className=t.legend+" svelte-1932cnh")},d:function(e){e&&c(r)}}}function Ge(e,t,r){var n=Object.create(e);return n.x=t[r],n.each_value=t,n.x_index=r,n}function We(e,t,r){var n=Object.create(e);return n.x=t[r],n.each_value_1=t,n.i=r,n}function Oe(e){var t=this._svelte,r=t.component,n=t.ctx;r.toggle(n.i)}function Te(e){var t=this;if(this._debugName="<LayerSwitch>",!e||!e.target&&!e.root)throw new Error("'target' is a required option");if(N(this,e),this._state=r(r(this.store._init(["active","mode"]),{modes:I,layers:A}),e.data),this.store._add(this,["active","mode"]),this._recompute({$active:1},this._state),"$active"in this._state||console.warn("<LayerSwitch> was created without expected data property '$active'"),"$mode"in this._state||console.warn("<LayerSwitch> was created without expected data property '$mode'"),"modes"in this._state||console.warn("<LayerSwitch> was created without expected data property 'modes'"),"layers"in this._state||console.warn("<LayerSwitch> was created without expected data property 'layers'"),this._intro=!!e.intro,this._handlers.destroy=[Se,E],this._fragment=function(e,t){for(var r,n,p,m,g,w,_,y,x,N,b=S("mode"),C=!1,E=t.modes,L=[],k=0;k<E.length;k+=1)L[k]=je(0,Ge(t,E,k));function P(){C=!0,e.store.set({mode:function(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(w)}),C=!1}var F=t.layers,j=[];for(k=0;k<F.length;k+=1)j[k]=Me(e,We(t,F,k));var M=t.$active>=0&&$e(0,t);return{c:function(){r=h("div"),n=h("div"),p=h("label"),m=u(b),g=u("\r\n        "),w=h("select");for(var i=0;i<L.length;i+=1)L[i].c();for(_=u("    \r\n    "),y=h("ul"),i=0;i<j.length;i+=1)j[i].c();x=u("\r\n    "),M&&M.c(),p.className="svelte-1932cnh",a(p,Fe,2,8,76),d(w,"change",P),"$mode"in t||e.root._beforecreate.push(P),w.className="svelte-1932cnh",a(w,Fe,3,8,120),n.className="mode-selector svelte-1932cnh",a(n,Fe,1,4,39),y.className="svelte-1932cnh",a(y,Fe,9,4,304),r.className="weather-view-layers svelte-1932cnh",a(r,Fe,0,0,0)},m:function(e,a){o(e,r,a),s(r,n),s(n,p),s(p,m),s(n,g),s(n,w);for(var i=0;i<L.length;i+=1)L[i].m(w,null);for(v(w,t.$mode),s(r,_),s(r,y),i=0;i<j.length;i+=1)j[i].m(y,null);s(r,x),M&&M.m(r,null),N=!0},p:function(t,n){if(t.modes){E=n.modes;for(var a=0;a<E.length;a+=1){var i=Ge(n,E,a);L[a]?L[a].p(t,i):(L[a]=je(0,i),L[a].c(),L[a].m(w,null))}for(;a<L.length;a+=1)L[a].d(1);L.length=E.length}if(!C&&t.$mode&&v(w,n.$mode),t.$active||t.layers){for(F=n.layers,a=0;a<F.length;a+=1){var s=We(n,F,a);j[a]?j[a].p(t,s):(j[a]=Me(e,s),j[a].c(),j[a].m(y,null))}for(;a<j.length;a+=1)j[a].d(1);j.length=F.length}n.$active>=0?M?M.p(t,n):((M=$e(0,n)).c(),M.m(r,null)):M&&(M.d(1),M=null)},i:function(e,t){N||this.m(e,t)},o:i,d:function(e){e&&c(r),l(L,e),f(w,"change",P),l(j,e),M&&M.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var e=this;this._layer=null;var t=this.store.on("state",function(t){var r=t.current,n=r.mode,a=r.active,i=r.moment;if(e._layer&&nsGmx.leafletMap.removeLayer(e._layer),0<=a&&a<A.length){var s=A[a];if(i<0){var o=nsGmx.leafletMap.getCenter(),c=o.lat,l=o.lng;q(n,c,l,new Date).then(function(t){var r=D[t].toString();e._layer=L.tileLayer.wms(Le+"/"+n+"/"+s+"/"+r+"/",{layers:s+"_f"+Pe(r),format:ke,transparent:!0}),nsGmx.leafletMap.addLayer(e._layer)}).catch(function(e){return console.log})}else{var h=D[i].toString();e._layer=L.tileLayer.wms(Le+"/"+n+"/"+s+"/"+D[i]+"/",{layers:s+"_f"+Pe(h),format:ke,transparent:!0}),nsGmx.leafletMap.addLayer(e._layer)}}});this.on("destroy",function(){t.cancel()})}).call(t),t.fire("update",{changed:n({},t._state),current:t._state})}),e.target){if(e.hydrate)throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");this._fragment.c(),this._mount(e.target,e.anchor),y(this)}this._intro=!0}function Re(e,t){this._handlers={},this._dependents=[],this._computed=m(),this._sortedComputedProperties=[],this._state=r({},e),this._differs=t&&t.immutable?w:g}r(Te.prototype,k),r(Te.prototype,{toggle:function(e){e===this.store.get().active?this.store.set({active:-1}):this.store.set({active:e})}}),Te.prototype._checkReadOnly=function(e){if("legend"in e&&!this._updatingReadonlyProperty)throw new Error("<LayerSwitch>: Cannot set read-only property 'legend'")},Te.prototype._recompute=function(e,t){var r;e.$active&&this._differs(t.legend,t.legend=(r=t.$active)>=0?"legend-icon legend-"+A[r]:"")&&(e.legend=!0)},r(Re.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},r=0;r<e.length;r+=1){var n=e[r];t["$"+n]=this._state[n]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set:function(e,t){var n=this,a=this._state;this._state=r(r({},a),e);for(var i=0;i<this._sortedComputedProperties.length;i+=1)this._sortedComputedProperties[i].update(this._state,t);this.fire("state",{changed:t,previous:a,current:this._state}),this._dependents.filter(function(e){for(var r={},a=!1,i=0;i<e.props.length;i+=1){var s=e.props[i];s in t&&(r["$"+s]=n._state[s],a=!0)}if(a)return e.component._stage(r),!0}).forEach(function(e){e.component.set({})}),this.fire("update",{changed:t,previous:a,current:this._state})},_sortComputedProperties:function(){var e=this._computed,t=this._sortedComputedProperties=[],r=m(),n=void 0;function a(i){var s=e[i];s&&(s.deps.forEach(function(e){if(e===n)throw new Error("Cyclical dependency detected between "+e+" <-> "+i);a(e)}),r[i]||(r[i]=!0,t.push(s)))}for(var i in this._computed)a(n=i)},compute:function(e,t,n){var a=this,i=void 0,s={deps:t,update:function(r,s,o){var c=t.map(function(e){return e in s&&(o=!0),r[e]});if(o){var l=n.apply(null,c);a._differs(l,i)&&(i=l,s[e]=!0,r[e]=i)}}};this._computed[e]=s,this._sortComputedProperties();var o=r({},this._state),c={};s.update(o,c,!0),this._set(o,c)},fire:_,get:x,on:b,set:function(e){var t=this._state,r=this._changed={},n=!1;for(var a in e){if(this._computed[a])throw new Error("'"+a+"' is a read-only property");this._differs(e[a],t[a])&&(r[a]=n=!0)}n&&this._set(e,r)}});var De=window.nsGmx.Translations;De.addText("rus",{layers:"Параметры",tmp:"Температура",wind:"Скорость ветра",direction:"Направление ветра",gust:"Порывы ветра",precip:"Количество осадков",pressure:"Давление",dewpoint:"Температура точки росы",rh:"Относительная влажность",cloud:"Общая облачность"}),De.addText("eng",{layers:"Weather Params",tmp:"Temperature",wind:"Wind speed",direction:"Wind direction",gust:"Wind gust",precip:"Precipitation",pressure:"Pressure",dewpoint:"Dewpoint temperature",rh:"Relative humidity",cloud:"General cloudiness"});var Ie=De.getText.bind(De),Ae=new Re({mode:I[0],active:-1,moment:-1}),Ve=function(e){return new Promise(function(t){var r=window.iconSidebarWidget.setPane("weather-pane",{createTab:window.createTabFunction({icon:"tl-cloud-cover",active:"sidebar-icon-active",inactive:"sidebar-icon-inactive",hint:Ie("layers")})});e.layerSwitch=new Te({target:r,store:Ae}),t(e)})};gmxCore.addModule("WeatherView",{pluginName:"Weather View",afterViewer:function(e,t){var r,n;gmxCore.loadCSS(gmxCore.getModulePath("WeatherView")+"scanex-forecast.css"),gmxCore.loadCSS(gmxCore.getModulePath("WeatherView")+"scanex-weather-view.css"),(r=[Ve],n={},r.reduce(function(e,t){return e.then(t)},new Promise(function(e,t){return e(n)}))).then(function(e){nsGmx.leafletMap.addControl(new Ce({position:"bottom",store:Ae}))})}})}();
//# sourceMappingURL=scanex-weather-view.js.map
