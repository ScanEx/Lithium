{"version":3,"sources":["webpack:///webpack/bootstrap 9eba4254a650a290e62c","webpack:///./src/entry.js","webpack:///./src/All.css","webpack:///./src/Locale.js","webpack:///./src/PluginPanel.js","webpack:///./src/ViewsFactory.js","webpack:///./src/Views/PripView.js","webpack:///./src/Views/PripView.css","webpack:///./src/Views/BaseView.js","webpack:///./src/Models/PripModel.js"],"names":["require","pluginName","menuId","toolbarIconId","cssTable","modulePath","gmxCore","getModulePath","PluginPanel","ViewsFactory","publicInterface","afterViewer","params","map","options","viewFactory","pluginPanel","sidebar","window","iconSidebarWidget","tab","createTabFunction","icon","active","inactive","hint","_gtxt","querySelector","innerHTML","sidebarPane","setPane","createTab","addEventListener","e","_activeTabId","show","addModule","css","_translationsHash","addtext","module","exports","_leftMenuBlock","_canvas","_div","_activeView","_views","create","_isReady","_createTabs","tabsTemplate","$","append","Handlebars","compile","v","frame","tabs","_this","forEach","i","eq","resize","on","is","target","each","addClass","removeClass","hide","click","_returnInstance","lmap","nsGmx","leafletMap","call","PripView","PripModel","_pm1","_pv1","_pm2","_pv2","_pm3","_pv3","_pm4","_pv4","BaseView","model","topOffset","container","find","tableTemplate","_markerIcon","L","className","iconAnchor","iconSize","iconUrl","_markers","prototype","Object","inProgress","state","_clean","scrollCont","empty","repaint","apply","arguments","parseCoordinate","coordElement","a","RegExp","exec","innerText","replace","console","log","currentTarget","x","parseFloat","y","showCoordinates","coordinates","tooltip","length","markers","c","m","marker","push","addTo","openPopup","closePopup","bindPopup","closeButton","init","reduce","prev","curr","fitBounds","maxZoom","animate","coordinate","z","getZoom","table","next","div","attr","td","tr","parent","siblings","removeLayer","_calcHeight","template","h","getBoundingClientRect","height","H","view","gifLoader","off","isActive","clean","startScreen","position","top","data","content","mCustomScrollbar","vessel","JSON","parse","infoDialogView","xmin","xmax","longitude","ymin","ymax","latitude","hasOwnProperty","ts_pos_utc","ts_pos_org","dt_pos_utc","closest","html","stringify","stopPropagation","lastPosition","showPosition","update","sorce","_data","isDirty","load","actualUpdate","fetch","then","response","json","Status","years","Result","acc","cv","year","prips","bind","catch","ex"],"mappings":"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","file":"PripPlugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9eba4254a650a290e62c","require(\"./All.css\")\r\n//require(\"./Views/PripView.css\")\r\nrequire(\"./Locale.js\")\r\n\r\n\r\nconst pluginName = 'PripPlugin',\r\n    menuId = pluginName,\r\n    toolbarIconId = pluginName, \r\n    cssTable = pluginName,\r\n    modulePath = gmxCore.getModulePath(pluginName);\r\n\r\nconst PluginPanel = require('./PluginPanel.js'),\r\n    ViewsFactory = require('./ViewsFactory');\r\n\r\nconst publicInterface = {\r\n    pluginName: pluginName,\r\n    afterViewer: function (params, map) {\r\n                   \r\n        const options = {\r\n            modulePath: modulePath,\r\n            },\r\n            viewFactory = new ViewsFactory(options),\r\n            pluginPanel = new PluginPanel(viewFactory);\r\n        pluginPanel.menuId = menuId;\r\n\r\n        let sidebar = window.iconSidebarWidget,\r\n        tab = window.createTabFunction({\r\n                    icon: \"Prip\", //menuId,\r\n                    active: \"prip_sidebar-icon\",\r\n                    inactive: \"prip_sidebar-icon\",\r\n                    hint: _gtxt('Prip.title')\r\n                })()\r\n        tab.querySelector('.Prip').innerHTML = '<svg height=\"16\" width=\"16\">' +\r\n            '<circle cx=\"8\" r=\"2\" cy=\"3\"></circle>' +\r\n            '<path d=\"M0 1 L8 3 L0 5Z\"></path>' +\r\n            '<path d=\"M8 3 L16 1 L16 5Z\"></path>' +\r\n            '<path d=\"M6 7 L6 10 L10 10 L10 7Z\"></path>' +\r\n            '<path d=\"M5 13 L4 16 L12 16 L11 13Z\"></path></svg>';\r\n        pluginPanel.sidebarPane = sidebar.setPane(\r\n            menuId, {\r\n                createTab: ()=>{\r\n                    return tab;\r\n                }\r\n            }\r\n        )\r\n        sidebar.addEventListener('opened', function (e) {\r\n            if (sidebar._activeTabId == menuId)\r\n                pluginPanel.show();\r\n        });\r\n\r\n    }\r\n}\r\n\r\ngmxCore.addModule(pluginName, publicInterface, {\r\n    css: cssTable + '.css'\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/entry.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/All.css\n// module id = 1\n// module chunks = 0","\r\n    _translationsHash.addtext('rus', {\r\n        'Prip.title': 'ПРИП',\r\n        'Prip.west_tab': 'ЗАПАД',\r\n        'Prip.east_tab': 'ВОСТОК',\r\n        'Prip.arkh_tab': 'АРХАНГЕЛЬСК',\r\n        'Prip.murm_tab': 'МУРМАНСК',\r\n        'Prip.open': 'показать',\r\n        'Prip.close': 'скрыть',\r\n    });\r\n    _translationsHash.addtext('eng', {\r\n        'Prip.title': 'COSTAL WARNING',\r\n        'Prip.west_tab': 'COSTAL WARNING WEST',\r\n        'Prip.east_tab': 'COSTAL WARNING EAST',\r\n        'Prip.arkh_tab': 'ARKHANGELSK',\r\n        'Prip.murm_tab': 'MURMANSK',\r\n        'Prip.open': 'open',\r\n        'Prip.close': 'close',\r\n    });\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Locale.js","\r\n\r\nmodule.exports = function (viewFactory) {\r\n    let _leftMenuBlock,\r\n        _canvas = _div(null),\r\n        _activeView,\r\n        _views = viewFactory.create(),\r\n        _isReady = false,\r\n        _createTabs = function () {\r\n            let tabsTemplate = '<table class=\"prip_tabs\" border=0><tr>' +\r\n            '</td><td class=\"prip_tab scrsearch_tab unselectable\" unselectable=\"on\">' +\r\n            '<div>{{i \"Prip.murm_tab\"}}</div>' +\r\n            '</td><td class=\"prip_tab scrsearch_tab unselectable\" unselectable=\"on\">' +\r\n            '<div>{{i \"Prip.arkh_tab\"}}</div>' +\r\n                '<td class=\"prip_tab dbsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"Prip.west_tab\"}}</div>' +\r\n                '</td><td class=\"prip_tab scrsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"Prip.east_tab\"}}</div>' +\r\n                '</td></tr></table>'\r\n\r\n            $(this.sidebarPane).append(_canvas);\r\n            $(_canvas).append(Handlebars.compile(tabsTemplate));\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n    \r\n            let tabs = $('.prip_tab', _canvas),\r\n                _this = this;           \r\n            _views.forEach((v,i) =>{\r\n                v.tab = tabs.eq(i);\r\n                v.resize(true);\r\n            }); \r\n            tabs.on('click', function () {\r\n                if (!$(this).is('.active')) {\r\n                    let target = this;\r\n                    tabs.each(function (i, tab) {\r\n                        if (!$(tab).is('.active') && target == tab) {\r\n                            $(tab).addClass('active');\r\n                            _views[i].show();\r\n                            _activeView = _views[i];\r\n                        }\r\n                        else {\r\n                            $(tab).removeClass('active');\r\n                            _views[i].hide();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Show the first tab\r\n            tabs.eq(0).removeClass('active').click();\r\n            // All has been done at first time\r\n            _isReady = true;\r\n        },\r\n\r\n    _returnInstance = {\r\n        show: function () {\r\n            let lmap = nsGmx.leafletMap;\r\n            if (!_isReady) \r\n            {\r\n                _createTabs.call(this);\r\n            }\r\n            else{          \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    };\r\n    return _returnInstance;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/PluginPanel.js","const PripView = require('./Views/PripView'),\r\n      PripModel = require('./Models/PripModel');\r\n\r\nmodule.exports = function (options) {\r\n    const _pm1 = new PripModel(\"http://kosmosnimki.ru/demo/prip/actual.ashx?zone=murm\"),\r\n        _pv1 = new PripView(_pm1),\r\n        _pm2 = new PripModel(\"http://kosmosnimki.ru/demo/prip/actual.ashx?zone=arkh\"),\r\n        _pv2 = new PripView(_pm2),\r\n        _pm3 = new PripModel(\"http://kosmosnimki.ru/demo/prip/actual.ashx?zone=west\"),\r\n        _pv3 = new PripView(_pm3),\r\n        _pm4 = new PripModel(\"http://kosmosnimki.ru/demo/prip/actual.ashx?zone=east\"),\r\n        _pv4 = new PripView(_pm4);\r\n\r\n    return {\r\n        create: function () {\r\n            return [_pv1, _pv2, _pv3, _pv4];\r\n        }\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ViewsFactory.js","require(\"./PripView.css\")\r\nconst BaseView = require('./BaseView.js');\r\nconst PripView = function (model){\r\n    BaseView.call(this, model);\r\n    this.topOffset = 80;\r\n    this.frame = $(Handlebars.compile('<div class=\"prip_view\">' +\r\n    '<div class=\"prips_all\">'+\r\n    '<table class=\"prips_year\" border=0><tr>' +\r\n    '<td><div class=\"open_positions ui-helper-noselect icon-right-open\" title=\"TITLE\"></div></td>' +\r\n    '<td><span class=\"date\">YEAR</span></td>' +\r\n    '</tr></table>' +\r\n    '<div><table class=\"prip_content\"><tr><td>COSTAL WARNING</td></tr></table></div>' +     \r\n    '</div>' +\r\n    '</div>')());\r\n    this.container = this.frame.find('.prips_all'); \r\n\r\n    this.tableTemplate = '{{#if msg}}<div class=\"message\">{{msg}}</div>{{/if}}' +\r\n        '{{#each years}}' +\r\n        '<table class=\"prips_year\" border=0 title=\"{{i \"Prip.close\"}}\"><tr>' +\r\n        '<td><div class=\"open_positions ui-helper-noselect icon-down-open\"></div></td>' +\r\n        '<td><span class=\"date\">20{{{year}}}</span></td>' +\r\n        '</tr></table>' +\r\n  \r\n        '<div>'+\r\n        \r\n        '<table class=\"prip_content\">' +\r\n        '{{#each prips}}' +\r\n        '<tr class=\"prip{{n}}_{{year}}\">' +\r\n        '<td><div class=\"open_positions ui-helper-noselect icon-right-open\" title=\"{{i \"Prip.open\"}}\"></div></td>' +\r\n        '<td>{{title}}</td>' +\r\n        '</tr>' +\r\n        '<tr><td colspan=\"2\" class=\"more\"><hr><div class=\"vi_more\">' +\r\n        '{{#each lines}}' +\r\n        '<div>{{{this}}}</div>' +\r\n        '{{/each}}' +\r\n        '</div></td></tr>' +\r\n        '{{/each}}' +\r\n        '</table>' +\r\n        \r\n        '</div>' +\r\n        '{{/each}}';\r\n};\r\n\r\nlet _markerIcon = L.icon({\r\n    className:\"prip_highlight-icon\", \r\n    iconAnchor:[6, 12], \r\n    iconSize:[12,12], \r\n    //iconUrl:'//maps.kosmosnimki.ru/api/plugins/ais/aissearch/highlight.png'});\r\n    iconUrl:'data:image/svg+xml, %3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20height=%2212%22%20width=%2212%22%3E%3Cpolyline%20points=%226,0%200,12%2012,12%206,0%22%20style=%22fill:none;stroke:%23f00;stroke-width:1%22/%3E%3C/svg%3E'}),\r\n    _markers = {};\r\n\r\nPripView.prototype = Object.create(BaseView.prototype);\r\n\r\nPripView.prototype.inProgress = function (state) {\r\n    if (state){\r\n        this.frame.css('background', 'url(\\'img/progress.gif\\') center no-repeat')\r\n    }\r\n    else{\r\n        this.frame.css('background-image', 'none')\r\n    }\r\n};\r\n\r\nlet _clean = function(){  \r\n    let scrollCont = this.container.find('.mCSB_container')\r\n    if (scrollCont[0])\r\n        scrollCont.empty();\r\n    else\r\n        this.container.empty();\r\n};\r\n\r\nPripView.prototype.repaint = function () {\r\n    _clean.call(this);  \r\n    BaseView.prototype.repaint.apply(this, arguments);\r\n\r\n    let parseCoordinate = function(coordElement){\r\n        let a = new RegExp(\"([\\\\d\\\\.,]+)-([\\\\d\\\\.,]+)-?([\\\\d\\\\.,]*)\\\\D ([\\\\d\\\\.,]+)-([\\\\d\\\\.,]+)-?([\\\\d\\\\.,]*)(\\\\D)?\", \"ig\")\r\n        .exec(coordElement.innerText.replace(\",\", \".\"));\r\n        if (a==null){\r\n            console.log(e.currentTarget.innerText+\" invalid!\")\r\n            return;\r\n        }\r\n        let x = parseFloat(a[4])+parseFloat(a[5])/60.0+parseFloat(\"0\"+a[6])/3600.0,\r\n            y = parseFloat(a[1])+parseFloat(a[2])/60.0+parseFloat(\"0\"+a[3])/3600.0;\r\n        if (a[7]==\"З\"||a[7]==\"W\")\r\n            x=-x;\r\n            // console.log(a)\r\n            // console.log(y+\", \"+x)\r\n        return [y, x];\r\n    },\r\n    showCoordinates = function(coordinates, tooltip){\r\n        if (coordinates.length==0)\r\n            return [];\r\n//console.log(coordinates)\r\n        let markers = []\r\n        coordinates.forEach((c,i)=>{\r\n            let m = L.marker(c, {icon:  _markerIcon})\r\n            markers.push(m)\r\n            m.addTo(nsGmx.leafletMap);            \r\n            m.on('mouseover', function (e) {\r\n                this.openPopup();\r\n            });\r\n            m.on('mouseout', function (e) {\r\n                this.closePopup();\r\n            });\r\n            m.bindPopup(tooltip, {closeButton:false});\r\n        })\r\n        let init =[[coordinates[0][0], coordinates[0][1]],\r\n            [coordinates[0][0], coordinates[0][1]]];\r\n        coordinates = coordinates.reduce((prev, curr)=>{\r\n            if (prev[0][0]>curr[0])\r\n                prev[0][0] = curr[0]\r\n            if (prev[0][1]>curr[1])\r\n                prev[0][1] = curr[1]\r\n            if (prev[1][0]<curr[0])\r\n                prev[1][0] = curr[0]\r\n            if (prev[1][1]<curr[1])\r\n                prev[1][1] = curr[1]\r\n            return prev;            \r\n        }, init)\r\n//console.log(coordinates)\r\n        nsGmx.leafletMap.fitBounds(coordinates, {\r\n            maxZoom: 9,\r\n            animate: false\r\n        });  \r\n        return markers;\r\n    }\r\n\r\n    this.container.find('.coordinate').click((e) => {\r\n        // let a = new RegExp(\"([\\\\d\\\\.,]+)-([\\\\d\\\\.,]+)-?([\\\\d\\\\.,]*)\\\\D ([\\\\d\\\\.,]+)-([\\\\d\\\\.,]+)-?([\\\\d\\\\.,]*)(\\\\D)?\", \"ig\")\r\n        // .exec(e.currentTarget.innerText.replace(\",\", \".\"));\r\n        // if (a==null){\r\n        //     console.log(e.currentTarget.innerText+\" invalid!\")\r\n        //     return;\r\n        // }\r\n        // let x = parseFloat(a[4])+parseFloat(a[5])/60.0+parseFloat(\"0\"+a[6])/3600.0,\r\n        //     y = parseFloat(a[1])+parseFloat(a[2])/60.0+parseFloat(\"0\"+a[3])/3600.0,\r\n        //     z = nsGmx.leafletMap.getZoom();\r\n        // if (a[7]==\"З\"||a[7]==\"W\")\r\n        //     x=-x;\r\n        let coordinate = parseCoordinate(e.currentTarget),\r\n            z = nsGmx.leafletMap.getZoom();\r\n        nsGmx.leafletMap.fitBounds([coordinate,coordinate], {\r\n                maxZoom: z,//(z < 9 ? 9 : z),\r\n                animate: false\r\n            });\r\n    });\r\n\r\n    this.container.find('.prips_year').click((e) => {\r\n        let table = $(e.currentTarget).next(),\r\n            div = $(e.currentTarget).find('td:first-of-type div');\r\n        if (div.is('.icon-down-open')){\r\n            div.addClass('icon-right-open').removeClass('icon-down-open')\r\n            $(e.currentTarget).attr('title', _gtxt(\"Prip.open\"))\r\n            table.hide();\r\n        }\r\n        else{\r\n            div.addClass('icon-down-open').removeClass('icon-right-open')\r\n            $(e.currentTarget).attr('title', _gtxt(\"Prip.close\"))           \r\n            table.show();\r\n        }\r\n    }).click().eq(0).click();\r\n\r\n    this.container.find('.prip_content td[class!=\"more\"]').click((e) => {\r\n        let td = $(e.currentTarget),\r\n            tr =  td.parent();\r\n        if (td.is('.active')) {\r\n            td.removeClass('active')\r\n            td.siblings().removeClass('active')\r\n            tr.next().find('td').removeClass('active')\r\n            tr.find('.icon-down-open').addClass('icon-right-open').removeClass('icon-down-open').attr('title', _gtxt(\"Prip.open\"));\r\n            _markers[tr.attr('class')].forEach(m=>{\r\n                nsGmx.leafletMap.removeLayer(m);\r\n            })\r\n        }\r\n        else {\r\n            td.addClass('active')\r\n            td.siblings().addClass('active')\r\n            tr.next().find('td').addClass('active')        \r\n            tr.find('.icon-right-open').addClass('icon-down-open').removeClass('icon-right-open').attr('title', _gtxt(\"Prip.close\"));\r\n            let coordinates = [];\r\n            tr.next().find('.coordinate').each((i, e)=>coordinates.push(parseCoordinate(e)));\r\n            _markers[tr.attr('class')] = showCoordinates(coordinates, tr[0].innerText.replace(/(^\\s+|\\s+$)/, '')\r\n            .replace(/(КАРТ)/, '<br>$1'));           \r\n        }\r\n    }); \r\n};\r\n\r\nmodule.exports = PripView;\n\n\n// WEBPACK FOOTER //\n// ./src/Views/PripView.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Views/PripView.css\n// module id = 7\n// module chunks = 0","\r\nlet _calcHeight = function () {\r\n    let template = this.frame.find('.prips_year')[0],\r\n        h = template.getBoundingClientRect().height\r\n\r\n    let H = $('.iconSidebarControl-pane').height() - this.topOffset;\r\n// console.log(template.getBoundingClientRect())\r\n// console.log(this.topOffset)\r\n// console.log(H)\r\n    return (H - H % h);\r\n};\r\n\r\nconst BaseView = function (model) {\r\n    model.view = this;\r\n    this.model = model;\r\n    this.gifLoader = '<img src=\"img/progress.gif\">';\r\n};\r\n\r\nlet _clean = function(){ \r\n    this.container.find('.info').off('click');\r\n    this.container.find('.position', ).off('click');   \r\n    let scrollCont = this.container.find('.mCSB_container')\r\n    if (scrollCont[0])\r\n        scrollCont.empty();\r\n    else\r\n        this.container.empty();\r\n//console.log(\"EMPTY ON BASE.CLEAN\")\r\n};\r\n\r\nBaseView.prototype = function () {\r\n    return {\r\n        get isActive(){\r\n            return this.frame.is(\":visible\");\r\n        },\r\n        resize: function (clean) {\r\n            let h = _calcHeight.call(this);\r\n            if (this.startScreen){\r\n                this.startScreen.height(h);\r\n                this.container.css({ position:\"relative\", top: -h+\"px\" });\r\n            }\r\n            this.container.height(h);\r\n\r\n            if (clean){\r\n                this.container.empty()\r\n            }\r\n        },\r\n        repaint: function(){\r\n            _clean.call(this);            \r\n//console.log(this.model.data)\r\n            if (!this.model.data)\r\n                return;\r\n            let scrollCont = this.container.find('.mCSB_container'),\r\n            content = $(Handlebars.compile(this.tableTemplate)(this.model.data));\r\n            if (!scrollCont[0]) {\r\n                this.container.append(content).mCustomScrollbar();\r\n            }\r\n            else {\r\n                $(scrollCont).append(content);\r\n            }\r\n\r\n            var _this = this;\r\n            this.container.find('.info', ).on('click', function (e) {\r\n                let target = $(this),\r\n                    vessel = JSON.parse(target.attr('vessel'))\r\n//console.log(vessel)\r\n                _this.infoDialogView && _this.infoDialogView.show(vessel, (v) => {\r\n//console.log(v)\r\n                    vessel.xmin = vessel.xmax = v.longitude\r\n                    vessel.ymin = vessel.ymax = v.latitude\r\n                    if (vessel.hasOwnProperty('ts_pos_utc')) {\r\n                         vessel.ts_pos_utc = v.ts_pos_utc;\r\n                         vessel.ts_pos_org = v.ts_pos_org;\r\n                         v.dt_pos_utc && $(this).closest('tr').find('.date').html(v.dt_pos_utc);\r\n                    }\r\n                    target.attr('vessel', JSON.stringify(vessel))\r\n                });\r\n                e.stopPropagation();\r\n            });\r\n            this.container.find('.ais_vessel').on('click', function () {\r\n//console.log(JSON.parse($(this).find('.info').attr('vessel')))\r\n                let v = JSON.parse($(this).find('.info').attr('vessel'));                \r\n                v.lastPosition = true;\r\n                _this.infoDialogView.showPosition(v);\r\n            });      \r\n        },\r\n        show: function () {\r\n            this.frame.show();\r\n            this.model.update();\r\n        },\r\n        hide: function () {\r\n            this.frame.hide();\r\n        }\r\n    }\r\n}();\r\n\r\nmodule.exports = BaseView;\n\n\n// WEBPACK FOOTER //\n// ./src/Views/BaseView.js","\r\nmodule.exports = function (sorce) {\r\n    let _data = null;    \r\n    return {\r\n        isDirty: true,\r\n        get data() { return _data; },\r\n        load: function (actualUpdate) {\r\n            return fetch(sorce)\r\n            .then(response=>{\r\n                return response.json()\r\n            }); \r\n        },\r\n        update: function () {\r\n            if (this.isDirty) {\r\n                this.view.inProgress(true);\r\n                this.load()\r\n                    .then((response => {\r\n                        if (response.Status && response.Status == \"ok\") {\r\n                            _data = {\r\n                                years: response.Result.reduce((acc, cv) => {\r\n                                    if (!acc.length || cv.year != acc[acc.length - 1].year)\r\n                                        acc.push({ year: cv.year, prips: [cv] })\r\n                                    else\r\n                                        acc[acc.length - 1].prips.push(cv)\r\n                                    return acc;\r\n                                }, [])\r\n                            }\r\n                        }\r\n                        else\r\n                            console.log(response);\r\n                        this.view.inProgress(false);\r\n                        this.view.repaint();\r\n                        this.isDirty = false;\r\n                    }).bind(this))\r\n                    .catch((ex=>{\r\n                        console.log(ex)\r\n                        this.view.inProgress(false);\r\n                    }).bind(this));\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Models/PripModel.js"],"sourceRoot":""}